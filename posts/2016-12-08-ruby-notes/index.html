<!doctype html><html lang=en-us><head><link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><script type=text/javascript src=https://latest.cactus.chat/cactus.js></script>
<link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>rubyå­¦ä¹ ç¬”è®° | almo7aya.md</title><link rel=canonical href=/posts/2016-12-08-ruby-notes/><meta name=description content="Senior web engineer supercharged with typescript, rust, swift, and lua, with hands on experience on various technologies, love to create and contribute to the open source community, working @ [anghami](https://anghami.com)."><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="rubyå­¦ä¹ ç¬”è®°"><meta property="og:description" content="regular expressions =~æ˜¯ç”¨äºæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…æ“ä½œç¬¦ã€‚è¿”å›åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²ä½ç½®æˆ–nilã€‚"><meta property="og:type" content="article"><meta property="og:url" content="/posts/2016-12-08-ruby-notes/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-12-08T22:54:49+00:00"><meta property="article:modified_time" content="2016-12-08T22:54:49+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="rubyå­¦ä¹ ç¬”è®°"><meta name=twitter:description content="regular expressions =~æ˜¯ç”¨äºæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…æ“ä½œç¬¦ã€‚è¿”å›åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²ä½ç½®æˆ–nilã€‚"><link rel=stylesheet href=/css/styles.87d626b26bb04ac09608d4fb3467f3177cc18e4747ed52c0b6906c90e1e28bebd5fbe2dd6bc84c6c72c132ddda620b2ba467996e1fef0b2876e35323b46105e1.css integrity="sha512-h9YmsmuwSsCWCNT7NGfzF3zBjkdH7VLAtpBskOHii+vV++Lda8hMbHLBMt3aYgsrpGeZbh/vCyh241MjtGEF4Q=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=/images/favicon.ico><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-KLG0T39J77","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=ltr><div class="max-width mx-auto content index pt4 px3"><header id=header><a href=/><div id=title><h1>&nbsp;almo7aya.md&nbsp;</h1><span class=repeated></span></div></a></header><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">rubyå­¦ä¹ ç¬”è®°</h1><div class=meta><div class=postdate><time datetime="2016-12-08 22:54:49 +0000 UTC" itemprop=datePublished>2016-12-08</time></div><div class=article-read-time><i class="far fa-clock"></i>
6 minute read</div><div class=article-tag><i class="fas fa-tag"></i>
<a class=tag-link href=/%20/tags/ruby rel=tag>ruby</a></div></div></header><div class=content itemprop=articleBody><h2 id=regular-expressions>regular expressions</h2><p><code>=~</code>æ˜¯ç”¨äºæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…æ“ä½œç¬¦ã€‚è¿”å›åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²ä½ç½®æˆ–nilã€‚</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">1</span><span><span style=color:#b8bb26>&#34;abcdef&#34;</span> <span style=color:#fe8019>=~</span> <span style=color:#b8bb26>/d/</span> <span style=color:#928374;font-style:italic># return 3</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">2</span><span><span style=color:#b8bb26>&#34;aaaaaa&#34;</span> <span style=color:#fe8019>=~</span> <span style=color:#b8bb26>/d/</span> <span style=color:#928374;font-style:italic># return nil</span>
</span></span></code></pre></div><h2 id=å’Œ>!å’Œ?</h2><p>The exclamation point (!, sometimes pronounced aloud as &ldquo;bang!&rdquo;) indicates something potentially destructive, that is to say, something that can change the value of what it touches.</p><pre tabindex=0><code>ruby&gt; s1 = &#34;forth&#34;
  &#34;forth&#34;
ruby&gt; s1.chop!       # This changes s1.
  &#34;fort&#34;
ruby&gt; s2 = s1.chop   # This puts a changed copy in s2,
  &#34;for&#34;
ruby&gt; s1             # ... without disturbing s1.
  &#34;fort&#34;
</code></pre><p>You&rsquo;ll also sometimes see chomp and chomp! used. These are more selective: the end of a string gets bit off only if it happens to be a newline.</p><p>The other method naming convention is the question mark (?, sometimes pronounced aloud as &ldquo;huh?&rdquo;) indicates a &ldquo;predicate&rdquo; method, one that can return either true or false.</p><h2 id=å››ç§å†…éƒ¨ä¸­æ–­å¾ªç¯çš„æ–¹å¼>å››ç§å†…éƒ¨ä¸­æ–­å¾ªç¯çš„æ–¹å¼</h2><ul><li><code>break</code></li><li><code>next</code> ç­‰åŒä¸continue</li><li><code>redo</code> restarts the current iteration</li><li><code>return</code></li></ul><h2 id=è¿­ä»£å™¨-iterator>è¿­ä»£å™¨ iterator</h2><p>Ruby&rsquo;s String type has some useful iterators. <code>each_byte</code> is an iterator for each character in the string.</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">1</span><span>irb<span style=color:#fe8019>(</span>main<span style=color:#fe8019>)</span>:001:0&gt; <span style=color:#b8bb26>&#34;abc&#34;</span>.each_byte<span style=color:#fe8019>{</span>|c| <span style=color:#fabd2f>printf</span> <span style=color:#b8bb26>&#34;&lt;%c&gt;&#34;</span>, c<span style=color:#fe8019>}</span>; print <span style=color:#b8bb26>&#34;\n&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">2</span><span>&lt;a&gt;&lt;b&gt;&lt;c&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">3</span><span><span style=color:#fe8019>=</span>&gt; nil
</span></span></code></pre></div><p>Another iterator of String is <code>each_line</code>.</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">1</span><span>irb<span style=color:#fe8019>(</span>main<span style=color:#fe8019>)</span>:002:0&gt; <span style=color:#b8bb26>&#34;a\nb\nc\n&#34;</span>.each_line<span style=color:#fe8019>{</span>|l| print l<span style=color:#fe8019>}</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">2</span><span>a
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">3</span><span>b
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">4</span><span>c
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">5</span><span><span style=color:#fe8019>=</span>&gt; <span style=color:#b8bb26>&#34;a\nb\nc\n&#34;</span>
</span></span></code></pre></div><p>rubyçš„ <code>for in</code> ä¹Ÿæ˜¯ä¸€ç§è¿­ä»£ã€‚We can use a control structure <code>retry</code> in conjunction with an iterated loop, and it will retry the loop from the beginning.</p><h3 id=yield>yield</h3><p><code>yield</code> occurs sometimes in a definition of an iterator. <code>yield</code> moves control to the block of code that is passed to the iterator (this will be explored in more detail in the chapter about procedure objects). The following example defines an iterator repeat, which repeats a block of code the number of times specified in an argument.</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 1</span><span>irb(main):<span style=color:#d3869b>003</span>:<span style=color:#d3869b>0</span><span style=color:#fe8019>&gt;</span> <span style=color:#fe8019>def</span> <span style=color:#fabd2f>repeat</span>(num)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 2</span><span>irb(main):<span style=color:#d3869b>004</span>:<span style=color:#d3869b>1</span><span style=color:#fe8019>&gt;</span>     <span style=color:#fe8019>while</span> num <span style=color:#fe8019>&gt;</span> <span style=color:#d3869b>0</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 3</span><span>irb(main):<span style=color:#d3869b>005</span>:<span style=color:#d3869b>2</span><span style=color:#fe8019>&gt;</span>         <span style=color:#fe8019>yield</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 4</span><span>irb(main):<span style=color:#d3869b>006</span>:<span style=color:#d3869b>2</span><span style=color:#fe8019>&gt;</span>         num <span style=color:#fe8019>-=</span> <span style=color:#d3869b>1</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 5</span><span>irb(main):<span style=color:#d3869b>007</span>:<span style=color:#d3869b>2</span><span style=color:#fe8019>&gt;</span>     <span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 6</span><span>irb(main):<span style=color:#d3869b>00</span><span style=color:#d3869b>8</span>:<span style=color:#d3869b>1</span><span style=color:#fe8019>&gt;</span> <span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 7</span><span><span style=color:#fe8019>=&gt;</span> <span style=color:#83a598>:repeat</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 8</span><span>irb(main):<span style=color:#d3869b>00</span><span style=color:#d3869b>9</span>:<span style=color:#d3869b>0</span><span style=color:#fe8019>&gt;</span> repeat(<span style=color:#d3869b>3</span>) { <span style=color:#fabd2f>puts</span> <span style=color:#b8bb26>&#34;foo&#34;</span> }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 9</span><span>foo
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">10</span><span>foo
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">11</span><span>foo
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">12</span><span><span style=color:#fe8019>=&gt;</span> <span style=color:#fe8019>nil</span>
</span></span></code></pre></div><h2 id=class>class</h2><h3 id=ç»§æ‰¿>ç»§æ‰¿</h3><p>ç»§æ‰¿çš„æ ¼å¼ä¸º:</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 1</span><span><span style=color:#fe8019>class</span> Superclass
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 2</span><span>    <span style=color:#fe8019>def</span> <span style=color:#fabd2f>breathe</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 3</span><span>        <span style=color:#fabd2f>puts</span> <span style=color:#b8bb26>&#34;inhale and exhale&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 4</span><span>    <span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 5</span><span>    <span style=color:#fe8019>def</span> <span style=color:#fabd2f>identify</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 6</span><span>        <span style=color:#fabd2f>puts</span> <span style=color:#b8bb26>&#34;I&#39;m super&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 7</span><span>    <span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 8</span><span>    <span style=color:#fe8019>def</span> <span style=color:#fabd2f>speak</span>(word)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 9</span><span>        <span style=color:#fabd2f>puts</span> word
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">10</span><span>    <span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">11</span><span><span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">12</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">13</span><span><span style=color:#fe8019>class</span> Subclass<span style=color:#fe8019>&lt;</span><span style=color:#d3869b>Superclass</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">14</span><span>    <span style=color:#928374;font-style:italic># code...</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">15</span><span><span style=color:#fe8019>end</span>
</span></span></code></pre></div><p>å¯åœ¨åœ¨å­ç±»ä¸­é‡æ–°å£°æ˜åŸºç±»æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>super</code>å…³é”®å­—æ¥æ‰©å±•åŸºç±»æ–¹æ³•ã€‚<code>super</code>ä¹Ÿå…è®¸æˆ‘ä»¬ä¼ é€’å‚æ•°ç»™åŸºç±»æ–¹æ³•ã€‚</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 1</span><span><span style=color:#fe8019>class</span> Subclass<span style=color:#fe8019>&lt;</span><span style=color:#d3869b>Superclass</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 2</span><span>    <span style=color:#fe8019>def</span> <span style=color:#fabd2f>identify</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 3</span><span>        <span style=color:#fe8019>super</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 4</span><span>        <span style=color:#fabd2f>puts</span> <span style=color:#b8bb26>&#34;I&#39;m sub too&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 5</span><span>    <span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 6</span><span>    <span style=color:#fe8019>def</span> <span style=color:#fabd2f>speak</span>(word)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 7</span><span>        <span style=color:#fe8019>super</span>(<span style=color:#b8bb26>&#34;this is from Superclass&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 8</span><span>        <span style=color:#fabd2f>puts</span> <span style=color:#b8bb26>&#34;now it&#39;s from Subclass: </span><span style=color:#b8bb26>#{</span>word<span style=color:#b8bb26>}</span><span style=color:#b8bb26>&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 9</span><span>    <span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">10</span><span><span style=color:#fe8019>end</span>
</span></span></code></pre></div><h3 id=åˆå§‹åŒ–æ„é€ å‡½æ•°>åˆå§‹åŒ–ï¼ˆæ„é€ å‡½æ•°ï¼‰</h3><p><code>ruby</code>ä½¿ç”¨<code>initialize</code>å…³é”®å­—æ¥å®ç°æ„é€ å‡½æ•°çš„åŠŸèƒ½ã€‚</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">1</span><span><span style=color:#fe8019>class</span> Fruit
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">2</span><span>    <span style=color:#fe8019>def</span> <span style=color:#fabd2f>initialize</span>( k<span style=color:#fe8019>=</span><span style=color:#b8bb26>&#34;apple&#34;</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">3</span><span>        @kind <span style=color:#fe8019>=</span> k
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">4</span><span>        @condition <span style=color:#fe8019>=</span> <span style=color:#b8bb26>&#34;ripe&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">5</span><span>    <span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">6</span><span><span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">7</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">8</span><span>apple <span style=color:#fe8019>=</span> <span style=color:#d3869b>Fruit</span><span style=color:#fe8019>.</span>new <span style=color:#b8bb26>&#34;apple&#34;</span>
</span></span></code></pre></div><h2 id=variables>variables</h2><ul><li><code>[a-z] or _</code> æœ¬åœ°å˜é‡</li><li><code>$</code> å…¨å±€å˜é‡</li><li><code>@</code> å®ä¾‹å˜é‡ instance variable</li><li><code>[A-Z]</code> å¸¸é‡</li></ul><h3 id=å…¨å±€å˜é‡>å…¨å±€å˜é‡</h3><p>å…¨å±€å˜é‡ä»¥ <code>$</code> å¼€å¤´ã€‚åˆå§‹åŒ–ä¹‹å‰ï¼Œå…¨å±€å˜é‡çš„å€¼ä¸º<code>nil</code>ã€‚å¯å®šä¹‰ä¸€æ®µprocedureæ¥è¿½è¸ªå…¨å±€å˜é‡ã€‚</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">1</span><span>$x <span style=color:#928374;font-style:italic>#return nil</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">2</span><span><span style=color:#fabd2f>trace_var</span> :$x, <span style=color:#fabd2f>proc</span>{<span style=color:#fabd2f>puts</span> <span style=color:#b8bb26>&#34;$x is now </span><span style=color:#b8bb26>#{</span>$x<span style=color:#b8bb26>}</span><span style=color:#b8bb26>&#34;</span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">3</span><span>$x <span style=color:#fe8019>=</span> <span style=color:#d3869b>5</span> <span style=color:#928374;font-style:italic>#return $x is now 5</span>
</span></span></code></pre></div><p>ä¸€äº›ç‰¹æ®Šçš„å˜é‡ï¼ˆä¸ä¸€å®šæ˜¯å…¨å±€ä½œç”¨åŸŸï¼‰ï¼š</p><ul><li><code>$!</code> latest error message</li><li><code>$@</code> location of error</li><li><code>$_</code> ä¸Šä¸€æ¬¡ç”±getsè¯»å…¥çš„å­—ç¬¦ä¸²</li><li><code>$.</code> line number last read by interpreter</li><li><code>$&</code> string last matched by regexp</li><li><code>$~</code> the last regexp match, as an array of subexpressions</li><li><code>$n</code> the nth subexpression in the last match (same as $~[n])</li><li><code>$=</code> case-insensitivity flag</li><li><code>$/</code> input record separator</li><li><code>$\</code> output record separator</li><li><code>$0</code> the name of the ruby script file</li><li><code>$*</code> å‘½ä»¤è¡Œå‚æ•°</li><li><code>$$</code> å½“å‰è§£é‡Šå™¨çš„è¿›ç¨‹id</li><li><code>$?</code> ä¸Šä¸€æ¬¡å­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ç </li></ul><h3 id=å®ä¾‹å˜é‡>å®ä¾‹å˜é‡</h3><p>An instance variable has a name beginning with <code>@</code>, and its scope is confined to whatever object <strong>self</strong> refers to. Two different objects, even if they belong to the same class, are allowed to have different values for their instance variables. From outside the object, instance variables <strong>cannot be altered or even observed</strong> (i.e., ruby&rsquo;s instance variables are never public) except by whatever methods are explicitly provided by the programmer. As with globals, instance variables have the nil value until they are initialized.</p><p>Instance variables do not need to be declared. This indicates a flexible object structure; in fact, each instance variable is dynamically appended to an object when it is first assigned.</p><h3 id=å¸¸é‡>å¸¸é‡</h3><p>å¸¸é‡åä»¥å¤§å†™å­—æ¯å¼€å¤´ã€‚ç»™å¸¸é‡é‡æ–°èµ‹å€¼ä¼šå¾—åˆ°è­¦å‘Šã€‚</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">1</span><span>irb<span style=color:#fe8019>(</span>main<span style=color:#fe8019>)</span>:009:0&gt; Wzr<span style=color:#fe8019>=</span>1222
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">2</span><span><span style=color:#fe8019>=</span>&gt; <span style=color:#d3869b>1222</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">3</span><span>irb<span style=color:#fe8019>(</span>main<span style=color:#fe8019>)</span>:010:0&gt; Wzr<span style=color:#fe8019>=</span><span style=color:#d3869b>1223</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">4</span><span><span style=color:#fe8019>(</span>irb<span style=color:#fe8019>)</span>:10: warning: already initialized constant Wzr
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">5</span><span><span style=color:#fe8019>(</span>irb<span style=color:#fe8019>)</span>:9: warning: previous definition of Wzr was here
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">6</span><span><span style=color:#fe8019>=</span>&gt; <span style=color:#d3869b>1223</span>
</span></span></code></pre></div><p>å¸¸é‡å¯ä»¥åœ¨ç±»å’Œæ¨¡å—ä¸­å®šä¹‰ï¼Œå¹¶å…è®¸å¤–éƒ¨è®¿é—®ã€‚</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">1</span><span><span style=color:#fe8019>class</span> ConstClass
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">2</span><span>   <span style=color:#d3869b>C1</span><span style=color:#fe8019>=</span><span style=color:#d3869b>120</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">3</span><span><span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">5</span><span><span style=color:#d3869b>ConstClass</span><span style=color:#fe8019>::</span><span style=color:#d3869b>C1</span> <span style=color:#928374;font-style:italic># return 120</span>
</span></span></code></pre></div><h2 id=è®¿é—®å™¨accessor>è®¿é—®å™¨(accessor)</h2><p>å®ä¾‹å±æ€§éœ€è¦é€šè¿‡å±æ€§è®¿é—®å™¨è®¿é—®ã€‚å¸¸è§„è®¿é—®å™¨æœ‰ç®€åŒ–å†™æ³•ï¼š</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">1</span><span><span style=color:#fe8019>class</span> Fruit
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">2</span><span>   <span style=color:#fe8019>def</span> <span style=color:#fabd2f>kind</span><span style=color:#fe8019>=</span>(k)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">3</span><span>       @kind <span style=color:#fe8019>=</span> k
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">4</span><span>   <span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">5</span><span>   <span style=color:#fe8019>def</span> <span style=color:#fabd2f>kind</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">6</span><span>       @kind
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">7</span><span>   <span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">8</span><span> <span style=color:#fe8019>end</span>
</span></span></code></pre></div><h3 id=inspectæ–¹æ³•>inspectæ–¹æ³•</h3><p>å½“åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶è§£é‡Šå™¨ä¼šè¿”å›ä¸€äº›ä¿¡æ¯ï¼š</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">1</span><span>irb(main):<span style=color:#d3869b>00</span><span style=color:#d3869b>9</span>:<span style=color:#d3869b>0</span><span style=color:#fe8019>&gt;</span> apple <span style=color:#fe8019>=</span> <span style=color:#d3869b>Fruit</span><span style=color:#fe8019>.</span>new
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">2</span><span><span style=color:#fe8019>=&gt;</span> <span style=color:#928374;font-style:italic>#&lt;Fruit:0x00000000a34f58&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">3</span><span>irb(main):<span style=color:#d3869b>010</span>:<span style=color:#d3869b>0</span><span style=color:#fe8019>&gt;</span>
</span></span></code></pre></div><p>å¯ä»¥é€šè¿‡<code>inspect</code>å…³é”®å­—æ¥æ”¹å˜è¿™ç§é»˜è®¤è¡Œä¸ºã€‚</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">1</span><span><span style=color:#fe8019>class</span> Fruit
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">2</span><span>    <span style=color:#fe8019>def</span> <span style=color:#fabd2f>inspect</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">3</span><span>        <span style=color:#b8bb26>&#34;a fruit is created&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">4</span><span>    <span style=color:#fe8019>end</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">5</span><span><span style=color:#fe8019>end</span>
</span></span></code></pre></div><p><code>inspect</code>æ–¹æ³•å¸¸ç”¨æ¥è°ƒè¯•ï¼Œå¯é€šè¿‡ä¸‹é¢ä¸¤ç§æ–¹å¼æ˜¾ç¤ºè°ƒç”¨ï¼š</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">1</span><span><span style=color:#fabd2f>p</span> anObject
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">2</span><span><span style=color:#fabd2f>puts</span> anObject<span style=color:#fe8019>.</span>inspect
</span></span></code></pre></div><h3 id=shortcuts>shortcuts</h3><p><code>Ruby</code>æä¾›äº†è®¿é—®å™¨çš„ä¸€äº›ç®€å†™å½¢å¼ï¼š</p><table><thead><tr><th style=text-align:center>ç¼©å†™</th><th style=text-align:center>æ•ˆæœ</th></tr></thead><tbody><tr><td style=text-align:center>attr_reader :v</td><td style=text-align:center>def v; @v; end</td></tr><tr><td style=text-align:center>attr_writer :v</td><td style=text-align:center>def v=(value); @v=value; end</td></tr><tr><td style=text-align:center>attr_accessor :v</td><td style=text-align:center>attr_reader :v; attr_writer :v</td></tr><tr><td style=text-align:center>attr_accessor :v, :w</td><td style=text-align:center>attr_accessor :v; attr_accessor :w</td></tr></tbody></table><h2 id=æ³¨é‡Š>æ³¨é‡Š</h2><p>å•è¡Œæ³¨é‡Šä»¥<code>#</code>å¼€å¤´ã€‚
å—æ³¨é‡Šå¯ä½¿ç”¨<code>=begin</code> <code>=end</code>æ¥æ ‡è®°ã€‚</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">1</span><span><span style=color:#928374;font-style:italic>=begin
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">2</span><span><span style=color:#928374;font-style:italic>è¿™æ˜¯ä¸€æ®µæ³¨é‡Šå—ã€‚This is a comment block.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">3</span><span><span style=color:#928374;font-style:italic>Egg, I dreamed I was old.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">4</span><span><span style=color:#928374;font-style:italic>=end</span>
</span></span></code></pre></div><h2 id=dynamic-dispatch>Dynamic Dispatch</h2><h2 id=mixins>Mixins</h2><p>Ruby has no multiple inheritance. But it has mixins.</p><h3 id=lookup-rulres>Lookup rulres</h3><p>When looking for receiver obj&rsquo;s method m,</p><ul><li>look in obj&rsquo;s class</li><li>look in mixins the class includes(later includes shadow)</li><li>look in obj&rsquo;s superclass</li><li>look in mixins the superclass inculdes</li><li>&mldr;</li></ul></div></article></div><footer id=footer><img id=image src=/images/avatar.jpg alt><div class=name>ğŸ“ ğŸ‡¾ğŸ‡ª</div><div class=name>Ali Almohaya</div><div class=link>GitHub: <a target=_blank href=https://github.com/almo7aya>@almo7aya</a></div><div class=link>Twitter: <a target=_blank href=https://twitter.com/@almo7aya_>@almo7aya_</a></div><div class=link>LinkedIn: <a target=_blank href=https://linkedin.com/in/almo7aya>Ali Almohaya</a></div><div class=link><a target=_blank href=mailto:alialmohaya@gmail.com>alialmohaya@gmail.com</a></div><div class=license>Licensed under a <a target=_blank href=https://creativecommons.org/licenses/by/4.0/>CC Attribution 4.0
International
License</a></div></footer></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
<script src=/js/code-copy.js></script></html>