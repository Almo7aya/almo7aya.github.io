<!doctype html><html lang=en-us><head><link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><script type=text/javascript src=https://latest.cactus.chat/cactus.js></script>
<link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>javaæ•£åˆ—çŸ¥è¯†ç‚¹æ€»ç»“ | almo7aya.md</title><link rel=canonical href=/posts/2017-02-18-hash/><meta name=description content="Senior web engineer supercharged with typescript, rust, swift, and lua, with hands on experience on various technologies, love to create and contribute to the open source community, working @ [anghami](https://anghami.com)."><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="javaæ•£åˆ—çŸ¥è¯†ç‚¹æ€»ç»“"><meta property="og:description" content="java çš„æ ¹ç±» Object å…·æœ‰ hashcode æ–¹æ³•ã€‚å½“ equal æ–¹æ³•è¢«é‡å†™æ—¶ä¹Ÿåº”å½“é‡å†™ hashcode æ–¹æ³•ã€‚"><meta property="og:type" content="article"><meta property="og:url" content="/posts/2017-02-18-hash/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-02-18T19:19:01+00:00"><meta property="article:modified_time" content="2017-02-18T19:19:01+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="javaæ•£åˆ—çŸ¥è¯†ç‚¹æ€»ç»“"><meta name=twitter:description content="java çš„æ ¹ç±» Object å…·æœ‰ hashcode æ–¹æ³•ã€‚å½“ equal æ–¹æ³•è¢«é‡å†™æ—¶ä¹Ÿåº”å½“é‡å†™ hashcode æ–¹æ³•ã€‚"><link rel=stylesheet href=/css/styles.f3f50251085c8e78d2006e9318ad326bbd1a1c2c77d3fcf0cafd269621649413d08e82299f0abfc7fe956d7f063455827d134fb4f5d7a92346eb73dab7804b4c.css integrity="sha512-8/UCUQhcjnjSAG6TGK0ya70aHCx30/zwyv0mliFklBPQjoIpnwq/x/6VbX8GNFWCfRNPtPXXqSNG63Pat4BLTA=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=/images/favicon.ico><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-KLG0T39J77","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=ltr><div class="max-width mx-auto content index pt4 px3"><header id=header><a href=/><div id=title><h1>&nbsp;almo7aya.md&nbsp;</h1><span class=repeated></span></div></a></header><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">javaæ•£åˆ—çŸ¥è¯†ç‚¹æ€»ç»“</h1><div class=meta><div class=postdate><time datetime="2017-02-18 19:19:01 +0000 UTC" itemprop=datePublished>2017-02-18</time></div><div class=article-read-time>|
<i class="far fa-clock"></i>
3 minute read</div></div></header><div class=content itemprop=articleBody><p>java çš„æ ¹ç±» <code>Object</code> å…·æœ‰ <code>hashcode</code> æ–¹æ³•ã€‚å½“ <code>equal</code> æ–¹æ³•è¢«é‡å†™æ—¶ä¹Ÿåº”å½“é‡å†™ <code>hashcode</code> æ–¹æ³•ã€‚</p><h2 id=åŸºæœ¬æ•°æ®ç±»å‹çš„æ•£åˆ—ç >åŸºæœ¬æ•°æ®ç±»å‹çš„æ•£åˆ—ç </h2><ul><li><code>byte</code> <code>short</code> <code>int</code> <code>char</code> ç±»å‹çš„æœç´¢é”®å°†ä¼šè½¬æ¢ä¸º <code>int</code>ã€‚</li><li><code>float</code> ç±»å‹çš„æœç´¢é”®ä½¿ç”¨ <code>Float.floatToIntBits(key)</code> ä½œä¸ºæ•£åˆ—ç ã€‚</li><li><code>long</code> ç±»å‹çš„æœç´¢é”®ä¼šè¿›è¡ŒæŠ˜å æ“ä½œï¼Œå¦‚ä¸‹ï¼š</li></ul><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">1</span><span>iny hashCode <span style=color:#fe8019>=</span> <span style=color:#fe8019>(</span><span style=color:#fabd2f>int</span><span style=color:#fe8019>)</span> <span style=color:#fe8019>(</span>key <span style=color:#fe8019>^</span> <span style=color:#fe8019>(</span>key <span style=color:#fe8019>&gt;&gt;</span> 32<span style=color:#fe8019>));</span>
</span></span></code></pre></div><ul><li><code>double</code> ç±»å‹çš„æœç´¢é”®ä¼šä½¿ç”¨ <code>Double.doubleToLongBits(key)</code> æ–¹æ³•è½¬æ¢ä¸º <code>long</code> ç±»å‹ç„¶åå†è¿›è¡ŒæŠ˜å ã€‚</li></ul><h2 id=å­—ç¬¦ä¸²ç±»å‹çš„æ•£åˆ—ç >å­—ç¬¦ä¸²ç±»å‹çš„æ•£åˆ—ç </h2><p>å¯¹äºå­—ç¬¦ä¸²ä¸€èˆ¬ä½¿ç”¨å¤šé¡¹å¼æ•£åˆ—ç è¿›è¡Œè®¡ç®—ï¼Œ</p><p><del>è¿™é‡Œæ”¾ä¸ªå…¬å¼çš„å›¾</del></p><p>bçš„è¾ƒå¥½å–å€¼ä¸º31ï¼Œ33ï¼Œ37ï¼Œ39ï¼Œ41ã€‚åœ¨ java String ç±»ä¸­ <code>b</code> å–31ã€‚</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 1</span><span><span style=color:#fe8019>public</span> <span style=color:#fe8019>static</span> <span style=color:#fabd2f>int</span> <span style=color:#fabd2f>hash</span><span style=color:#fe8019>(</span>String key<span style=color:#fe8019>,</span> <span style=color:#fabd2f>int</span> tableSize<span style=color:#fe8019>)</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 2</span><span><span style=color:#fe8019>{</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 3</span><span>    <span style=color:#fabd2f>int</span> hashVal <span style=color:#fe8019>=</span> 0<span style=color:#fe8019>;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 5</span><span>    <span style=color:#fe8019>for</span> <span style=color:#fe8019>(</span><span style=color:#fabd2f>int</span> i <span style=color:#fe8019>=</span> 0<span style=color:#fe8019>;</span> i <span style=color:#fe8019>&lt;</span> key<span style=color:#fe8019>.</span><span style=color:#b8bb26;font-weight:700>length</span><span style=color:#fe8019>();</span> i<span style=color:#fe8019>++)</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 6</span><span>        hashVal <span style=color:#fe8019>=</span> 37<span style=color:#fe8019>*</span>hashVal <span style=color:#fe8019>+</span> key<span style=color:#fe8019>.</span><span style=color:#b8bb26;font-weight:700>charAt</span><span style=color:#fe8019>(</span>i<span style=color:#fe8019>);</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 7</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 8</span><span>    hashVal <span style=color:#fe8019>%=</span> tableSize<span style=color:#fe8019>;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 9</span><span>    <span style=color:#fe8019>if</span> <span style=color:#fe8019>(</span>hashVal <span style=color:#fe8019>&lt;</span> 0<span style=color:#fe8019>)</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">10</span><span>        hashVal <span style=color:#fe8019>+=</span> tableSize<span style=color:#fe8019>;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">11</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">12</span><span>    <span style=color:#fe8019>return</span> hashVal<span style=color:#fe8019>;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">13</span><span><span style=color:#fe8019>}</span>
</span></span></code></pre></div><h2 id=å‹ç¼©æ•£åˆ—ç >å‹ç¼©æ•£åˆ—ç </h2><p>ç”±äºæ•£åˆ—ç å¯èƒ½æ˜¯å¾ˆå¤§çš„æ­£æ•°ï¼Œé€šå¸¸åº”è¯¥å¯¹å…¶è¿›è¡Œå‹ç¼©ä»¥é˜²æ­¢è¶…å‡ºç´¢å¼•çš„èŒƒå›´ã€‚è‹¥ç´¢å¼•èŒƒå›´ä¸º <code>0 ~ n - 1</code> ï¼Œé€šå¸¸çš„åšæ³•æ˜¯ <code>h(hashCode) = hashCode % N</code> ï¼Œé€‰æ‹©Nä¸ºå¤§äº2çš„ç´ æ•°ã€‚
<code>java.util.HashMap</code> çš„å®ç°ä¸­ï¼Œå°†Nè®¾ç½®ä¸º2çš„å¹‚å€¼ï¼Œè¿™æ ·å¯ä»¥ä½¿ç”¨ä½è¿ç®—ä»£æ›¿ä¸Šè¿°çš„å–æ¨¡ï¼š<code>h(hashCode) = hashCode & (N - 1)</code> ï¼Œä¸¤è€…æ˜¯å®Œå…¨ç­‰ä»·çš„ã€‚</p><h2 id=å¤„ç†å†²çª>å¤„ç†å†²çª</h2><h3 id=å¼€æ”¾åœ°å€æ³•>å¼€æ”¾åœ°å€æ³•</h3><p>å¼€æ”¾åœ°å€æ³•æ˜¯åœ¨å†²çªå‘ç”Ÿæ—¶ï¼Œåœ¨æ•£åˆ—è¡¨ä¸­æ‰¾åˆ°ä¸€ä¸ªå¼€æ”¾ä½ç½®çš„è¿‡ç¨‹ã€‚</p><ul><li>çº¿æ€§æ¢æµ‹ï¼Œå­˜åœ¨æˆç°‡é—®é¢˜</li><li>äºŒæ¬¡æ¢æµ‹ï¼Œå­˜åœ¨äºŒæ¬¡æˆç°‡é—®é¢˜ï¼Œå¹¶ä¸”ä¸èƒ½ä¿è¯ä¸€ä¸ªå¼€æ”¾çš„å•å…ƒæ€»æ˜¯å¯ä»¥è¢«æ‰¾åˆ°ã€‚</li><li>å†å“ˆå¸Œæ³•</li></ul><h3 id=é“¾åœ°å€æ³•>é“¾åœ°å€æ³•</h3><p>é“¾åœ°å€æ³•æ˜¯å°†å…·æœ‰åŒæ ·ç´¢å¼•çš„æ¡ç›®æ”¾åœ¨åŒä¸€ä½ç½®ï¼Œæ¯ä¸ªä½ç½®ä½¿ç”¨ä¸€ä¸ªæ¡¶(ArrayList or LinkedList)æ¥æ”¾ç½®å¤šä¸ªæ¡ç›®ã€‚</p><h2 id=è£…å¡«å› å­>è£…å¡«å› å­</h2><p>è£…å¡«å› å­è¡¡é‡ä¸€ä¸ªæ•£åˆ—è¡¨æœ‰å¤šæ»¡ã€‚<code>lamda = n / N</code> ã€‚å¯¹äºå¼€æ”¾åœ°å€æ³•ï¼Œè£…å¡«å› å­ä»‹äº 0 ~ 1ï¼Œå¯¹äºé“¾åœ°å€æ³•ï¼Œè£…å¡«å› å­å¯èƒ½ä¸ºä»»æ„å€¼ã€‚é€šå¸¸å¼€æ”¾åœ°å€æ³•éœ€è¦å°†è£…å¡«å› å­ç»´æŒåœ¨0.5ä»¥ä¸‹ï¼Œè€Œé“¾åœ°å€æ³•ä¸º0.9ä»¥ä¸‹ã€‚<code>java.util.HashMap</code> é‡‡ç”¨äº†é˜ˆå€¼0.75ã€‚</p></div></article><div class=blog-post-comments><div id=disquss_thread><script src=https://utteranc.es/client.js repo=almo7aya/almo7aya.github.io issue-term=pathname label=almo7aya.dev theme=dark-blue crossorigin=anonymous async></script></div></div></div><footer id=footer><img id=image src=/images/avatar.jpg alt><div class=name>ğŸ“ ğŸ‡¾ğŸ‡ª</div><div class=name>Ali Almohaya</div><div class=link>GitHub: <a target=_blank href=https://github.com/almo7aya>@almo7aya</a></div><div class=link>Twitter: <a target=_blank href=https://twitter.com/@almo7aya_>@almo7aya_</a></div><div class=link>LinkedIn: <a target=_blank href=https://linkedin.com/in/almo7aya>Ali Almohaya</a></div><div class=link><a target=_blank href=mailto:alialmohaya@gmail.com>alialmohaya@gmail.com</a></div><div class=license>Licensed under a <a target=_blank href=https://creativecommons.org/licenses/by/4.0/>CC Attribution 4.0
International
License</a></div></footer></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
<script src=/js/code-copy.js></script></html>